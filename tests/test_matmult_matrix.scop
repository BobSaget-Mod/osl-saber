# Matmul example, matrix representation

OpenScop

# =============================================== Global
# Language
C

# Context
CONTEXT
1 3
# e/i   N    1
   1    1   -1    ## N-1 >= 0

# Parameter names are provided
1
# Parameter names
N 

# Iterator names are provided
1
# Iterator names
i j k 

# Scattering dimension names are not provided
0

# Number of statements
2

# =============================================== Statement 1
# Number of relations describing the statement
3

# ----------------------------------------------  1.1 Domain
DOMAIN
4 5
# e/i   i    j    N    1
   1    1    0    0    0    ## i >= 0
   1   -1    0    1   -1    ## -i+N-1 >= 0
   1    0    1    0    0    ## j >= 0
   1    0   -1    1   -1    ## -j+N-1 >= 0

# ----------------------------------------------  1.2 Scattering
SCATTERING
5 5
#  e    i    j    N    1
   0    0    0    0    0    ## 0
   0    1    0    0    0    ## i
   0    0    0    0    0    ## 0
   0    0    1    0    0    ## j
   0    0    0    0    0    ## 0

# ----------------------------------------------  1.3 Access
WRITE
3 5
# eq    i    j    N    1
   0    0    0    0    1    ## C
   0    1    0    0    0    ##  [i]
   0    0    1    0    0    ##     [j]

# ----------------------------------------------  1.4 Body
# Statement body is provided
1
# Original iterator names
i j 
# Statement body
c[i][j] = 0.0;


# =============================================== Statement 2
# Number of relations describing the statement
5

# ----------------------------------------------  2.1 Domain
DOMAIN
6 6
# e/i   i    j    k    N    1
   1    1    0    0    0    0    ## i >= 0
   1   -1    0    0    1   -1    ## -i+N-1 >= 0
   1    0    1    0    0    0    ## j >= 0
   1    0   -1    0    1   -1    ## -j+N-1 >= 0
   1    0    0    1    0    0    ## k >= 0
   1    0    0   -1    1   -1    ## -k+N-1 >= 0

# ----------------------------------------------  2.2 Scattering
SCATTERING
7 6
#  e    i    j    k    N    1
   0    0    0    0    0    0    ## 0
   0    1    0    0    0    0    ## i
   0    0    0    0    0    0    ## 0
   0    0    1    0    0    0    ## j
   0    0    0    0    0    1    ## 1
   0    0    0    1    0    0    ## k
   0    0    0    0    0    0    ## 0

# ----------------------------------------------  2.3 Access
RDWR
3 6
# eq    i    j    k    N    1
   0    0    0    0    0    1    ## C
   0    1    0    0    0    0    ##  [i]
   0    0    1    0    0    0    ##     [j]

READ
3 6
# eq    i    j    k    N    1
   0    0    0    0    0    2    ## A
   0    1    0    0    0    0    ##  [i]
   0    0    0    1    0    0    ##     [k]

READ
3 6
# eq    i    j    k    N    1
   0    0    0    0    0    3    ## B
   0    0    0    1    0    0    ##  [k]
   0    0    1    0    0    0    ##     [j]

# ----------------------------------------------  2.4 Body
# Statement body is provided
1
# Original iterator names
i j k 
# Statement body
c[i][j] = c[i][j] + a[i][k] * b[k][j];
